var Anim=function(a,b,c){var d="undefined"!=typeof WebKitCSSMatrix?WebKitCSSMatrix:XCSSMatrix,e=function(a){return null!==a&&a!==c},f=b.createElement("div"),g=function(a){var b;for(b in a)if(f.style[b]!==c)return a[b];return""},h=function(a){for(var b=a.length;b--;)if(f.style[a[b]]!==c)return a[b];return""},i=function(a){return function(b){return a.slice.call(b)}}(Array.prototype),j=function(){for(var a,b,c=i(arguments),d=c[0]||{},e=0,f=c.length;f>e;e++)if(0!==e&&(a=c[e]))for(b in a)d[b]=a[b];return d},k=(Date.now||function(){return(new Date).getTime()},function(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c}),l=["x","y","z","scaleX","scaleY","scaleZ","rotationX","rotationY","rotationZ"],m={opacity:"",width:"px",height:"px"},n=function(){var a=b.head;return{addStyle:function(c){var d=b.createElement("style");return d.innerHTML=c,a.appendChild(d)},removeStyle:function(b){b&&a.removeChild(b)}}}(),o={animationEvent:g({"-webkit-animation":"webkitAnimationEnd","-moz-animation":"animationend","-o-animation":"oAnimationEnd","-ms-animation":"msAnimationEnd",animation:"animationend"}),transform:h(["transform","msTransform","oTransform","mozTransform","webkitTransform"]),transformOrigin:h(["transformOrigin","msTransformOrigin","oTransformOrigin","mozTransformOrigin","webkitTransformOrigin"])},p={animationDuration:h(["animation-duration","-ms-animation-duration","-o-animation-duration","-moz-animation-duration","-webkit-animation-duration"]),animationName:h(["animation-name","-ms-animation-name","-o-animation-name","-moz-animation-name","-webkit-animation-name"]),animationKeyFrame:g({"-webkit-animation-name":"-webkit-keyframes","-moz-animation-name":"-moz-keyframes","-o-animation-name":"-o-keyframes","-ms-animation-name":"-ms-keyframes","animation-name":"keyframes"}),animationTimingFunction:h(["animation-timing-function","-ms-animation-timing-function","-o-animation-timing-function","-moz-animation-timing-function","-webkit-animation-timing-function"]),animationFillMode:h(["animation-fill-mode","-ms-animation-fill-mode","-o-animation-fill-mode","-moz-animation-fill-mode","-webkit-animation-fill-mode"]),backfaceVisibility:h(["backface-visibility","-ms-backface-visibility","-o-backface-visibility","-moz-backface-visibility","-webkit-backface-visibility"]),transform:h(["transform","-ms-transform","-o-transform","-moz-transform","-webkit-transform"])},q=p.animationDuration&&p.animationKeyFrame&&p.animationName&&p.animationTimingFunction,r=(!!p.transform,function(){var a=function(a){""===a&&console.error(a,"Missing event type")},b=function(){this.events={}};return b.prototype={emit:function(){var b=arguments[0],c=arguments.length>=2?i(arguments):[];a(b);var d=this.events[b];if(d){for(var e,f=[],g=0,h=d.length;h>g;g++)e=d[g],f.push(e.apply(null,c));return f}},on:function(b,c){a(b);this.events[b]||(this.events[b]=[]);return this.events[b].push(c)},addListener:function(){this.on.apply(this,arguments)},off:function(b,c){if(a(b),this.events[b])for(var d=this.events[b],e=d.length;e--;)d[e]===c&&d.splice(e,1)},removeListener:function(){this.off.apply(this,arguments)},once:function(b,c){a(b);var d=this;return this.on(b,function(){return d.off(b,fn),c.apply(null,arguments)})},removeAllListeners:function(b){if(a(b),this.events[b])for(var c,d=this.events[b],e=d.length;e--;)c=d[e],this.off(b,c)}},b}()),s=function(){var a=Math.PI,b=new d,c=function(a){var b={};return b.translation={x:a.m41,y:a.m42,z:a.m43},b.scale={x:Math.sqrt(a.m11*a.m11+a.m12*a.m12+a.m13*a.m13),y:Math.sqrt(a.m21*a.m21+a.m22*a.m22+a.m23*a.m23),z:Math.sqrt(a.m31*a.m31+a.m32*a.m32+a.m33*a.m33)},b.rotation={x:-Math.atan2(a.m32/b.scale.z,a.m33/b.scale.z),y:Math.asin(a.m31/b.scale.z),z:-Math.atan2(a.m21/b.scale.y,a.m11/b.scale.x)},b},e=function(a){a instanceof d&&this.from(a)};return e.prototype={from:function(b){b=c(b),this.x=b.translation.x,this.y=b.translation.y,this.scaleX=b.scale.x,this.scaleY=b.scale.y,this.scaleZ=b.scale.z,this.rotationX=b.rotation.x/a*180,this.rotationY=b.rotation.y/a*180,this.rotationZ=b.rotation.z/a*180},set:function(a){return a._matrix=this},css:function(){var a=b;return a=a.translate(this._x,this._y,this._z),a=a.rotate(this._rotationX,this._rotationY,this._rotationZ),a=a.scale(this._scaleX,this._scaleY,this._scaleZ),a.toString()}},e.define=function(a,b){Object.defineProperty(e.prototype,a,b)},e.define("x",{get:function(){return this._x||0},set:function(a){return this._x=a}}),e.define("y",{get:function(){return this._y||0},set:function(a){return this._y=a}}),e.define("z",{get:function(){return this._z||0},set:function(a){return this._z=a}}),e.define("scaleX",{get:function(){return this._scaleX||1},set:function(a){return this._scaleX=a}}),e.define("scaleY",{get:function(){return this._scaleY||1},set:function(a){return this._scaleY=a}}),e.define("scaleZ",{get:function(){return this._scaleZ||1},set:function(a){return this._scaleZ=a}}),e.define("scale",{get:function(){return(this._scaleX+this._scaleY)/2},set:function(a){return this._scaleX=this._scaleY=a}}),e.define("rotationX",{get:function(){return this._rotationX||0},set:function(a){return this._rotationX=a}}),e.define("rotationY",{get:function(){return this._rotationY||0},set:function(a){return this._rotationY=a}}),e.define("rotationZ",{get:function(){return this._rotationZ||0},set:function(a){return this._rotationZ=a}}),e.define("rotation",{get:function(){return this.rotationZ},set:function(a){return this.rotationZ=a}}),e}(),t=function(){var a=3e3,b=100,c={tension:80,friction:8,velocity:0,speed:1/60,tolerance:.1},d=function(a){return-a.tension*a.x-a.friction*a.v},e=function(a){return{dx:a.v,dv:d(a)}},f=function(a,b,c){var e={x:a.x+c.dx*b,v:a.v+c.dv*b,tension:a.tension,friction:a.friction};return{dx:e.v,dv:d(e)}},g=function(a,b){var c=e(a),d=f(a,.5*b,c),g=f(a,.5*b,d),h=f(a,b,g),i=1/6*(c.dx+2*(d.dx+g.dx)+h.dx),j=1/6*(c.dv+2*(d.dv+g.dv)+h.dv);return a.x=a.x+i*b,a.v=a.v+j*b,a},h=function(a,b,d,e){this.velocity=d||c.velocity,this.tension=a||c.tension,this.friction=b||c.friction,this.speed=e||c.speed,this.tolerance=c.tolerance,this.startValue=0,this.currentValue=0,this.isMoving=!0,this.results=[]};return h.prototype={next:function(){var a={x:this.currentValue-b,v:this.velocity,tension:this.tension,friction:this.friction},c=g(a,this.speed);this.currentValue=b+c.x;var d=c.v,e=c.x,f=c.v,h=Math.abs(e)<this.tolerance,i=Math.abs(f)<this.tolerance;return stopSpring=h&&i,this.isMoving=!stopSpring,stopSpring&&(d=0,this.currentValue=b),this.velocity=d,this.currentValue},all:function(){for(var b=0,c=this.results;this.isMoving;){if(b++,b>a)throw new Error("Spring: too many values");c.push(this.next())}return c},time:function(){return this.results.length*this.speed}},h.create=function(a,b,c,d){return new h(a,b,c,1/d)},h.generate=function(a,b,c,d){var e=new h(a,b,c,1/d);return e.all()},h}(),u=function(){var a=1e-6,b=function(a,b,c,d){this.cx=3*a,this.bx=3*(c-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*b,this.by=3*(d-b)-this.cy,this.ay=1-this.cy-this.by};b.prototype={_sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},_sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},_solveCurveX:function(b){for(var c,d,e=b,f=0;8>f;){if(c=this._sampleCurveX(e)-b,Math.abs(c)<a)return e;if(d=this.sampleCurveDerivativeX(e),Math.abs(d)<a)break;e-=c/d,f++}var g=0,h=1;if(e=b,g>e)return g;if(e>h)return h;for(;h>g;){if(c=this._sampleCurveX(e),Math.abs(c-b)<a)return e;b>c?g=e:h=e,e=.5*(h-g)+g}return e},solve:function(a){return this._sampleCurveY(this._solveCurveX(a))}};var c=function(a,c,d,e,f,g){this._curve=new b(a,c,d,e),this._values=[],this._time=f,this._fps=g};return j(c,{Linear:function(a,b){return new c(0,0,1,1,a,b)},Ease:function(a,b){return new c(.25,.1,.25,1,a,b)},EaseIn:function(a,b){return new c(.42,0,1,1,a,b)},EaseOut:function(a,b){return new c(0,0,.58,1,a,b)},EaseInOut:function(a,b){return new c(.42,0,.58,1,a,b)},create:function(a,b,c){return new a(b,c)},generate:function(a,b,c){var d=new a(b,c);return d.all()}}),j(c.prototype,{all:function(){var a=this._time/1e3*this._fps-1;if(a>3e3)throw Error("Bezier: too many values");var b,c;for(b=c=0;a>=0?a>=c:c>=a;b=a>=0?++c:--c)this._values.push(100*this._curve.solve(b/a));return this._values},time:function(){return this._time}}),c}(),v=function(){var a=function(a,b){return a.classList?a.classList.add(b):void(a.className+=" "+b)},f=function(a,b){return a.classList?a.classList.remove(b):void(a.className=a.className.replace(new RegExp("(^|\\b)"+b.split(" ").join("|")+"(\\b|$)","gi")," "))},g=function(a){a.scale&&(a.scaleX=a.scale,a.scaleY=a.scale),a.rotation&&(a.rotationZ=to.rotation)},h=function(a,b,d){var f,g,h;for(f in d){if(g&&h)break;e(b[f])||(l.indexOf(f)>-1?g=!0:f in m&&(h=!0))}if(g){var j=i(a);for(f in d)j[f]!==c&&(b[f]=j[f])}if(h){var n=k(a);for(f in d)n[f]!==c&&(b[f]=parseFloat(n[f]))}return b},i=function(a){for(var b,c={},d=l.length,e=new s(a.getComputedMatrix());d--;)b=l[d],c[b]=e[b];return c},k=function(a){var b,c={},d=a.getComputedStyle();for(b in m)c[b]=d[b];return c},n=function(a,b){r.call(this),this.elem=a,this.style=this.elem.style,this.properties=b||{},this._matrix=new s(new d(this.elem.style[o.transform])),this._bindEnd()};return j(n.prototype,r.prototype,{_bindEnd:function(){var a=this;this.elem.addEventListener(o.animationEvent,function(){a.emit("end")},!1)},addClass:function(b){a(this.elem,b)},removeClass:function(a){f(this.elem,a)},animate:function(a,b){g(this.properties),g(a.properties),this.properties=h(this,this.properties,a.properties);var c=q?new w(this,a):new x(this,a);return c.start(b),c},setMatrix:function(a){this._matrix=a,this.style[o.transform]=this._matrix.css()},getComputedMatrix:function(){return new d(this.getComputedStyle()[o.transform])},getComputedStyle:function(){return b.defaultView.getComputedStyle(this.elem)}}),n}(),w=function(){var a={timeSpeedFactor:1,roundingDecimals:5,fps:60},b="animationjs-animation-",c=0,d=function(d,e){r.call(this),this.view=d,this.callback=e.callback,this.precision=e.precision||a.fps,this.origin=e.origin,this.time=e.time||1e3,this.curve=e.curve||"linear",this._to=e.properties,this._from=d.properties,this._id=c+=1,this._cleanup=this._cleanup.bind(this),this._animationName=b+this._id,this._currentProperties={},this._spring=e.spring,this._ease=e.ease,this._curveValues=this._parseCurve(e),this._totalTime=this._curveValues.length/this.precision*1e3,this.origin&&(this.view.style[o.transformOrigin]=this.origin)};return j(d.prototype,r.prototype,{start:function(){this._aggregateCurrentProperties();var a=this._omitUnchangedProperties();a&&(this._styleTag=n.addStyle(this._generateKeyframeCss()+" ."+this._animationName+" { "+p.animationDuration+": "+this._totalTime/1e3+"s;"+p.animationName+": "+this._animationName+";"+p.animationTimingFunction+": linear;"+p.animationFillMode+": both;"+p.backfaceVisibility+": visible;}"),this.view.addClass(this._animationName),this.view.on("end",this._cleanup))},_aggregateCurrentProperties:function(){for(var a,b=this._to,c=l.length;c--;)a=l[c],e(b[a])&&(this._currentProperties[a]=b[a]);for(a in m)e(b[a])&&(this._currentProperties[a]=b[a])},_omitUnchangedProperties:function(){var a,b=0;for(a in this._currentProperties)this._from[a]!==this._currentProperties[a]?b+=1:delete this._currentProperties[a];return b},reverse:function(){var a=new d(this.view,{properties:this._from,callback:this.callback,precision:this.precision,origin:this.origin,time:this.time,curve:this.curve,spring:this._spring,ease:this._ease});return a.start(),a},stop:function(){return this._cleanup()},_cleanup:function(){this.view.off("end",this._cleanup);var a,b=this.view.getComputedStyle(),c={};for(a in m)c[a]=b[a];return this.view.setMatrix(new s(this.view.getComputedMatrix())),this.view.style=j(this.view.style,c),this.view.removeClass(this._animationName),n.removeStyle(this._styleTag),this._styleTag=null,this.view.properties=this._to,this.callback&&this.callback(this),this.emit("end")},_generateKeyframeCss:function(){var b=this._generateKeyframes(),c=[],d=new s;c.push("@"+p.animationKeyFrame+" "+this._animationName+" {");var f,g,h,i,j;for(f in b){for(g=b[f],c.push(f+"% {"),c.push(p.transform+": "),j=l.length;j--;)h=l[j],d[h]=g[h];c.push(d.css()+"; ");for(h in m)i=m[h],e(g[h])&&c.push(h+":"+k(g[h],a.roundingDecimals)+i+"; ");c.push("}")}return c.push("}"),c.join("")},_generateKeyframes:function(){for(var b=0,c=this._curveValues,d=100/(c.length-1),e=this._deltas(),f={},g=0,h=c.length;h>g;g++){var i,j=c[g],l=k(b*d,a.roundingDecimals),m={};for(i in this._currentProperties)m[i]=j*e[i]+this._from[i];f[l]=m,b++}return f},_deltas:function(){var a,b={};for(a in this._currentProperties)b[a]=(this._currentProperties[a]-this._from[a])/100;return b},_parseCurve:function(b){var c=a.timeSpeedFactor,d=this.precision*c,e=this.time*c;if(b.spring){var f=b.spring;return t.generate(f.tension,f.friction,f.velocity,d)}if(b.curve){var g=b.curve;if("linear"===g)return u.generate(u.Linear,this.precision,e);if("ease"===g)return u.generate(u.Ease,this.precision,e);if("ease-in"===g)return u.generate(u.EaseIn,this.precision,e);if("ease-out"===g)return u.generate(u.EaseOut,this.precision,e);if("ease-in-out"===g)return u.generate(u.EaseInOut,this.precision,e)}return u.generate(u.Linear,this.precision,this.time)}}),d}(),x=function(){var a={timeSpeedFactor:1,roundingDecimals:5,fps:60},b="animationjs-animation-",c=0,d=function(a){var b,c=[];for(b in a)c.push(parseFloat(b));return c.sort(function(a,b){return a-b})},f=function(d,e){r.call(this),this.view=d,this.callback=e.callback,this.precision=e.precision||a.fps,this.origin=e.origin,this.time=e.time||1e3,this.curve=e.curve||"linear",this._to=e.properties,this._from=d.properties,this._id=c+=1,this._animationName=b+this._id,this._currentProperties={},this._spring=e.spring,this._ease=e.ease,this._curve=this._parseCurve(e),this._curveValues=this._curve.all(),this._totalTime=this._curve.time(),this.origin&&(this.view.style[o.transformOrigin]=this.origin)};return j(f.prototype,w.prototype,{start:function(){this._aggregateCurrentProperties();var a=this._omitUnchangedProperties();if(a){var b=this._generateKeyframeCss();this._animate(b)}},_animate:function(a){var b=this,c=d(a),e=0;this._tween=new TWEEN.Tween({key:c[0]}).to({key:c},1e3*this._totalTime).onUpdate(function(){var d=c[e];keyframe=a[d],keyframe&&(b._applyKeyframeStyles(keyframe),e+=1)}).onComplete(function(){var d=c.length-1,e=c[d];keyframe=a[e],b._applyKeyframeStyles(keyframe),b._cleanup()}).interpolation(TWEEN.Interpolation.Linear).easing(TWEEN.Easing.Linear.None).start()},_applyKeyframeStyles:function(a){self.view.style[o.transform]=a.transform;var b;for(b in a.css)self.view.style[b]=a.css[b]},_cleanup:function(){return this._tween=null,this.view.properties=this._to,this.callback&&this.callback(this),this.emit("end")},_generateKeyframeCss:function(){var b,c,d,f,g,h=this._generateKeyframes(),i={},j=new s;for(b in h){c=h[b];var n={};for(g=l.length;g--;)d=l[g],j[d]=c[d];n.transform=j.css(),n.css={};for(d in m)f=m[d],e(c[d])&&(n.css[d]=k(c[d],a.roundingDecimals)+f);i[b]=n}return i},_parseCurve:function(b){var c=a.timeSpeedFactor,d=this.precision*c,e=this.time*c;if(b.spring){var f=b.spring;return t.create(f.tension,f.friction,f.velocity,d)}if(b.curve){var g=b.curve;if("linear"===g)return u.create(u.Linear,this.precision,e);if("ease"===g)return u.create(u.Ease,this.precision,e);if("ease-in"===g)return u.create(u.EaseIn,this.precision,e);if("ease-out"===g)return u.create(u.EaseOut,this.precision,e);if("ease-in-out"===g)return u.create(u.EaseInOut,this.precision,e)}return u.create(u.Linear,this.precision,this.time)}}),f}();return v}(window,document);
//# sourceMappingURL=AnimJS-0.0.1.min.map